{% extends 'default_page.html' %}
{% load poll_extras %}
{%load staticfiles %}
{% block content %}
<style>
   .btn span.fa-check {         
   opacity: 0;        
   }
   .btn.active span.fa-check {        
   opacity: 1;        
   }
</style>
<div class="content-header">
   <div class="container-fluid">
      <div class="row mb-2">
         <div class="col-sm-6">
            <h1 class="m-0 text-dark">Belge Düzenle</h1>
         </div>
         <!-- /.col -->
         <div class="col-sm-6 buttonmobile">
            <ol class="breadcrumb float-sm-right">
            </ol>
         </div>
         <!-- /.col -->
      </div>
      <!-- /.row -->
   </div>
   <!-- /.container-fluid -->
</div>
   
    <div class="card">
              <div class="card-header">
                <h3 class="card-title">Belgeler</h3> 
                <div class="card-tools">
              
                </div>               
              </div>
              <!-- /.card-header -->
              <div class="card-body table-responsive p-0">
                <table class="table table-hover">
                  <tbody><tr>
                    <th>Belge</th>
                    <th>İşlem</th>
                  </tr>
                  {%for i in file%}
                  <tr>
                    <td><a href="{{i.belge.url}}">{{i.belge.name}}</a></td>
                    <td>
                      <div class="btn-group">
                        <a href="/belge/yukle/dosyasil/{{i.id}}" role="button" class="btn btn-danger btn-flat" onclick="return confirm('Bu belgeyi silmek istediğinize emin misiniz ?')"><i class="fa fa-remove"></i></a>
                      </div>
                    </td>
                  </tr>         
                  {%endfor%}
                  
                </tbody></table>
              </div>
              <!-- /.card-body -->
            </div>

<div class="modal-body">
   <form action="/belge/kayitlar/duzenlefuc/{{record.id}}" method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
         <div class="row">
            <label class="col-sm-2">Evrak Türü:</label>
            <div class="col-sm-10">
               <div class="btn-group" data-toggle="buttons">
                  <div class="btn-group" style="display: inline-table;" data-toggle="buttons">
                     <label class="btn btn-default {%if record.tur == 0 %}active{%endif%}" id="btn1">
                     <input type="radio" autocomplete="off" name="tur" value="0" style="display:none;">Gelen
                     <span class="fa fa-check "></span>
                     </label>
                     <label class="btn btn-default {%if record.tur == 1 %}active{%endif%}" id="btn2">
                     <input type="radio" autocomplete="off" name="tur" value="1" style="display:none;">Giden
                     <span class="fa fa-check "></span>
                     </label>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="form-group">
         <label for="recipient-name" class="control-label">Tarih:</label>
         <div class="input-group date" data-provide="datepicker2">
            <input type="text" class="form-control" autocomplete="off" id="datepickertop" name="tarih" placeholder="Tarih"  required="" oninvalid="this.setCustomValidity('Lütfen bu alanı doldurunuz.')"  oninput="setCustomValidity('')" value="{{record.tarih}}" disabled="">
            <div class="input-group-addon">
               <span class="glyphicon glyphicon-th"></span>
            </div>
         </div>
      </div>
      <div class="form-group">
         <label for="recipient-name" class="control-label">Konu:</label>
         <textarea type="text" class="form-control" id="konu" name="konu" placeholder="Konu" maxlength="100" required="" oninvalid="this.setCustomValidity('Lütfen bu alanı doldurunuz.')"  oninput="setCustomValidity('')">{{record.konu}}</textarea>
      </div>
      <div class="form-group">
         <label for="recipient-name" class="control-label">Kime:</label>
         <input type="text" class="form-control " id="kime" name="kime" placeholder="Kurum, Kuruluş veya Kişi" maxlength="100" required="" oninvalid="this.setCustomValidity('Lütfen bu alanı doldurunuz.')"  oninput="setCustomValidity('')" value="{{record.kime}}">
      </div>
      <div class="card-footer bg-white" >
         <ul class="mailbox-attachments clearfix" id="a">
            <div class="col-sm-4">
               <h4>Belge Yükle</h4>
               <input type="file" name="dosya" id="dosya">
               <div id="onizleme" style="margin-top:10px;"></div>
            </div>
         <hr>
         </ul>

      </div>
      <div class="modal-footer">
         <button type="button" onclick="duplicate()" class="btn btn-danger">Ek Belge +1</button>
         <a href="/belge/kayitlar" role="button" class="btn btn-secondary">Vazgeç</a>
         <button type="submit" class="btn btn-primary">Kaydet</button>
      </div>
   </form>
</div>
<script type="text/javascript">
var i = 0;
var original = document.getElementById('a');

function duplicate() {
   var clone = original.cloneNode(true); // "deep" clone
   clone.id = "a" + ++i;
   // or clone.id = ""; if the divs don't need an ID
   original.parentNode.appendChild(clone);
}

$(function() {
    if ($('#btn1').hasClass('active')){
      $('#btn1').click().click();
    };
    if ($('#btn2').hasClass('active')){
      $('#btn2').click().click();
    };
});
   
</script>

{% endblock %}